---
title: Dynamic Flags
description: Render flags from runtime ISO codes.
---

import { Card, CardGrid } from '@astrojs/starlight/components'
import { LinkCard } from '@astrojs/starlight/components'
import { Tabs, TabItem } from '@astrojs/starlight/components'

When you need to render flags based on runtime data (user input, API responses, database values), you have several options depending on your framework.

## Option 1: CircleFlag (React - Recommended)

Use `CircleFlag` for **minimal bundle size** with on-demand CDN loading:

```tsx
import { CircleFlag } from '@sankyu/react-circle-flags'

export function CountryFlag({ code }: { code: string }) {
  return <CircleFlag countryCode={code} width={36} height={36} title="Country flag" />
}
```

:::tip[Best for Most Cases]
`CircleFlag` loads SVG flags from CDN on demand, adding only ~2 KB to your bundle while supporting all 400+ flags.
:::

:::note[SVG props scope]
`CircleFlag` renders a `<div>` wrapper with the fetched SVG inside. SVG-specific props (e.g. `stroke`, `viewBox`) will not apply through the wrapper; stick to sizing (`width`/`height`) and className/style for the wrapper, or use named imports/DynamicFlag when you need direct SVG props.
:::

**Backward Compatible API:**

For compatibility with `react-circle-flags`, you can also use the `code` prop:

```tsx
// Both work the same way
<CircleFlag countryCode="us" width={36} />
<CircleFlag code="us" width={36} />
```

## Option 2: Vue Dynamic Import

For Vue 3, use `defineAsyncComponent` to dynamically load flags:

```vue
<script setup lang="ts">
import { ref, computed, defineAsyncComponent } from 'vue'

const countryCode = ref('us')

const FlagComponent = computed(() => {
  const code = countryCode.value.toLowerCase()
  const componentName = `Flag${code.charAt(0).toUpperCase()}${code.slice(1)}`
  return defineAsyncComponent(() =>
    import('@sankyu/vue-circle-flags').then(module => module[componentName])
  )
})
</script>

<template>
  <component :is="FlagComponent" :width="36" :height="36" />
</template>
```

:::tip[Vue Dynamic Loading]
This approach only loads the flags you need at runtime, keeping your bundle size minimal.
:::

## Option 3: DynamicFlag (React)

Use `DynamicFlag` when you need synchronous rendering and **cannot use CDN**:

```tsx
import { DynamicFlag } from '@sankyu/react-circle-flags'

export function CountryFlag({ code }: { code: string }) {
  return <DynamicFlag code={code} width={36} height={36} />
}
```

:::caution[Large Bundle Size]
`DynamicFlag` bundles **ALL 400+ flag components** (~600 KB) in your bundle. Only use this if:

- You cannot access CDN in your environment
- You need synchronous, instant rendering without loading states
- Bundle size is not a primary concern
  :::

## When to use it

<CardGrid>
  <Card title="User Input" icon="pencil">
    Country selectors, forms, or settings where users choose their location.
  </Card>
  <Card title="API Responses" icon="external">
    Data fetched from external APIs that include country codes.
  </Card>
  <Card title="Database Records" icon="seti:db">
    User profiles or records stored with country information.
  </Card>
  <Card title="Runtime Values" icon="random">
    Any scenario where the country code is not known at build time.
  </Card>
</CardGrid>

## Real-world example

<Tabs syncKey="framework">
  <TabItem label="React (CircleFlag)" icon="seti:react">
    ```tsx
    import { CircleFlag } from '@sankyu/react-circle-flags'

    interface User {
      name: string
      countryCode: string
    }

    export function UserProfile({ user }: { user: User }) {
      return (
        <div className="flex items-center gap-3">
          <CircleFlag
            countryCode={user.countryCode.toLowerCase()}
            width={32}
            height={32}
            title={`${user.name}'s country`}
          />
          <span>{user.name}</span>
        </div>
      )
    }
    ```

  </TabItem>
  <TabItem label="React (DynamicFlag)" icon="seti:react">
    ```tsx
    import { DynamicFlag } from '@sankyu/react-circle-flags'

    interface User {
      name: string
      countryCode: string
    }

    export function UserProfile({ user }: { user: User }) {
      return (
        <div className="flex items-center gap-3">
          <DynamicFlag
            code={user.countryCode.toLowerCase()}
            width={32}
            height={32}
            title={`${user.name}'s country`}
          />
          <span>{user.name}</span>
        </div>
      )
    }
    ```

  </TabItem>
  <TabItem label="Vue 3" icon="seti:vue">
    ```vue
    <script setup lang="ts">
    import { computed, defineAsyncComponent } from 'vue'

    interface User {
      name: string
      countryCode: string
    }

    const props = defineProps<{ user: User }>()

    const FlagComponent = computed(() => {
      const code = props.user.countryCode.toLowerCase()
      const componentName = `Flag${code.charAt(0).toUpperCase()}${code.slice(1)}`
      return defineAsyncComponent(() =>
        import('@sankyu/vue-circle-flags').then(module => module[componentName])
      )
    })
    </script>

    <template>
      <div class="flex items-center gap-3">
        <component
          :is="FlagComponent"
          :width="32"
          :height="32"
          :title="`${user.name}'s country`"
        />
        <span>{{ user.name }}</span>
      </div>
    </template>
    ```

  </TabItem>
</Tabs>

## Bundle Size Comparison

<CardGrid>
  <Card title="CircleFlag (Best)" icon="star">
    ```tsx
    import { CircleFlag } from '@sankyu/react-circle-flags'
    ```
    - **Bundle impact:** ~2 KB (component only)
    - **Loading:** Async from CDN
    - **Tree-shaking:** ✅ Perfect
    - **Best for:** Minimal bundle size with dynamic flags
  </Card>

  <Card title="DynamicFlag" icon="warning">
    ```tsx
    import { DynamicFlag } from '@sankyu/react-circle-flags'
    ```
    - **Bundle impact:** ~600 KB (all flags bundled)
    - **Loading:** Synchronous, instant
    - **Tree-shaking:** ❌ None
    - **Best for:** CDN-restricted environments
  </Card>
</CardGrid>

:::tip[Code Normalization]
Both `CircleFlag` and `DynamicFlag` automatically convert country codes to lowercase, so `"US"` and `"us"` work identically.
:::

## Advanced: CircleFlag with Custom CDN

For better performance or region-specific optimization:

```tsx
import { CircleFlag } from '@sankyu/react-circle-flags'

export function CountryFlag({ code }: { code: string }) {
  return (
    <CircleFlag
      countryCode={code}
      width={36}
      height={36}
      cdnUrl="https://custom-cdn.example.com/flags/"
    />
  )
}
```

## Decision Tree

```
Need dynamic flags?
├─ Can use CDN? → ✅ Use CircleFlag (~2 KB)
└─ Cannot use CDN? → Use DynamicFlag (~600 KB)
```

**Note:** For flags known at build time, use named imports for best bundle size:

```tsx
import { FlagUs, FlagCn } from '@sankyu/react-circle-flags'
// ~950 bytes per flag with tree-shaking
```

## Next step

<LinkCard
  title="Bundle Size"
  description="Learn about bundle size optimization and tree-shaking strategies"
  href="../bundle-size/"
/>
